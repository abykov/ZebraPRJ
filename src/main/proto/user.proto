syntax = "proto3";

option java_multiple_files = true; // Generate separate classes per message
option java_package = "com.example.zebraprj.grpc"; // Package for generated classes
option java_outer_classname = "UserProto"; // Outer class name wrapper

// Message representing a user
message UserMessage {
  int64 id = 1; // User identifier
  string name = 2; // Unique user name
  string email = 3; // Unique user email
  string birthdate = 4; // Birthdate in ISO-8601 format
}

// Request for adding a single user
message AddUserRequest {
  UserMessage user = 1; // User to add
}

// Response containing added user or validation errors
message AddUserResponse {
  UserMessage user = 1; // Added user details
  repeated string error = 2; // List of validation errors
}

// Request for retrieving all users
message GetUsersRequest {}

// Response containing list of users
message GetUsersResponse {
  UserMessage user = 1; // All users in the system
}

// Single delete instruction that can specify either id or name
message DeleteUserRequest {
  int64 id = 1; // Optional user identifier
  string name = 2; // Optional name identifier
}

// Request for deleting users by id or name
message DeleteUserByNameIDRequest {
  repeated DeleteUserRequest request = 1; // Delete instructions
}

// Response for delete operation
message DeleteUserByNameIDResponse {
  repeated string delete = 1; // Successfully deleted entries
  repeated string error = 2; // Errors for not found or invalid requests
}

// gRPC service definition for user operations
service UserGrpcService {
  rpc AddUser(AddUserRequest) returns (AddUserResponse); // Creates new user
  rpc GetUsers(GetUsersRequest) returns (GetUsersResponse); // Retrieves all users
  rpc DeleteUserByNameId(DeleteUserByNameIDRequest) returns (DeleteUserByNameIDResponse); // Deletes users by id or name
}